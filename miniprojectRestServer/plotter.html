<html>
    <head>
        <title>Bart Awesome Plotter </title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
            <script>
                (function(){

                    let mycombo=Combo.New(document.getElementById('sensors'));
                    mycombo.options(['first', 'second', 'third']);

                    mycombo.onchange=function(e, combo) {
                      let val=combo.value;
                      // let val=this.value; // same as above
                      alert(val);
                     }
                 })();
                }
            </script>
            <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
            <script type="text/javascript">
              google.charts.load('current', {'packages':['corechart']});
              google.charts.setOnLoadCallback(drawChart);

              function drawChart() {
                  var localhost = window.location.hostname;
                  $.getJSON('http://' + localhost + ':3000/sensor/3', function (json_data) {
                      var array = [["ID", "Sensor Value"]];
                      for(var json in json_data.Data){
                          var measurement_data = json_data.Data[json];
                          array.push([measurement_data.ID, measurement_data.VALUE]);
                      }

                      var data = google.visualization.arrayToDataTable(array);

                      var options = {
                        title: 'Measurement Data',
                        curveType: 'Measurement value',
                        legend: { position: 'bottom' }
                      };

                      var chart = new google.visualization.LineChart(document.getElementById('curve_chart'));

                      chart.draw(data, options);

                  });
              }
            </script>
    </head>
    <body>
        <select id="sensors"></select>
        <div id="curve_chart" style="width: 900px; height: 500px"></div>
    </body>

</html>
